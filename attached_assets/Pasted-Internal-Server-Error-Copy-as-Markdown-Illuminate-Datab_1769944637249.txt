Internal Server Error

Copy as Markdown
Illuminate\Database\QueryException
vendor/laravel/framework/src/Illuminate/Database/Connection.php:824
SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'community' cannot be null (Connection: mysql, SQL: insert into `patients` (`woman_name`, `age`, `literacy_status`, `phone_number`, `husband_name`, `husband_phone`, `community`, `address`, `lga_id`, `ward_id`, `preferred_language`, `gravida`, `parity`, `age_of_pregnancy_weeks`, `date_of_registration`, `edd`, `fp_interest`, `blood_pressure`, `weight_kg`, `height_cm`, `blood_group`, `blood_level`, `unique_id`, `phc_id`, `anc_visits_count`, `anc4_completed`, `pnc_completed`, `alert`, `post_edd_followup_status`, `updated_at`, `created_at`) values (Aisha, 22, Literate, 09018710083, ?, ?, ?, Ungogo Gabas, 8, 20, ?, 7, 6, 7, 2026-02-01 00:00:00, 2026-09-20 00:00:00, Yes, 120/80, 70, 170, O+, ?, BNG/GAY/001, 1, 0, 0, 0, Needs ANC 1 Visit, ANC Incomplete, 2026-02-01 10:41:31, 2026-02-01 10:41:31))

LARAVEL
12.36.0
PHP
8.4.17
UNHANDLED
CODE 23000
500
POST
http://127.0.0.1:8000/phc/patient

Exception trace
15 vendor frames

App\Http\Controllers\PhcStaffController->{closure:App\Http\Controllers\PhcStaffController::store():66}()
app/Http/Controllers/PhcStaffController.php:86

81            $data['phc_id'] = $user->phc_id;
82
83            // Handle boolean conversions
84            $data = $this->convertBooleanFields($data);
85
86            $patient = Patient::create($data);
87
88            return redirect()->route('phc.create-patient')
89                ->with('success', 'Patient registered successfully! Unique ID: ' . $data['unique_id']);
90        });
91    }
92
93    /**
94     * Display all patients for this PHC (Dashboard).
95     */
96    public function index(Request $request)
97    {
98
3 vendor frames

App\Http\Controllers\PhcStaffController->store()
app/Http/Controllers/PhcStaffController.php:66

5 vendor frames

App\Http\Middleware\RoleMiddleware->handle()
app/Http/Middleware/RoleMiddleware.php:21

51 vendor frames

public/index.php
public/index.php:20

1 vendor frame

Queries
1-7 of 7
mysql
select * from `sessions` where `id` = 'dDhqMxFYPLn87pVxXuuxb4fHAbLuj8FHYeB9b2K4' limit 1
3.86ms
mysql
select * from `users` where `id` = 2 limit 1
1.6ms
mysql
select * from `lgas` where `lgas`.`id` = '8' limit 1
1.56ms
mysql
select * from `wards` where `wards`.`id` = '20' limit 1
1.57ms
mysql
select count(*) as aggregate from `lgas` where `id` = '8'
1.61ms
mysql
select count(*) as aggregate from `wards` where `id` = '20'
1.38ms
mysql
select count(*) as aggregate from `patients` where `lga_id` = '8' and `ward_id` = '20'
1.79ms
Headers
host
127.0.0.1:8000
connection
keep-alive
content-length
448
sec-ch-ua-platform
"Linux"
x-xsrf-token
eyJpdiI6Inl5Q0RSbWs2a2t6ZkhUK0xXek15bWc9PSIsInZhbHVlIjoid2FtK0ZwaWdtN1JCRVpBSXlGR00rZEgvbXUvVlQzRzRZRWpaTkkrNGR6NVhsZVZXR053SXlOOW5ad1ZydGhhRTZ2QUp2WVN4dm1YMTFIdU1ZRGRjM21UMXlqWVFsK1JIMUlUSEVFMU9PUFdqWW9WWUZJSFlFeGZ4MHBaTkhWZnMiLCJtYWMiOiIwZDU1NmEzNTdiMzA2NzNhYmZhZWVlMDcxMzVkMDQ0MDE4ZDlmMTBkYjc0MzkxYzc0M2Y5Njc1NTk3YjZmNTgzIiwidGFnIjoiIn0=
sec-ch-ua
"Not(A:Brand";v="8", "Chromium";v="144", "Google Chrome";v="144"
x-inertia
true
sec-ch-ua-mobile
?0
x-requested-with
XMLHttpRequest
user-agent
Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
accept
text/html, application/xhtml+xml
content-type
application/json
origin
http://127.0.0.1:8000
sec-fetch-site
same-origin
sec-fetch-mode
cors
sec-fetch-dest
empty
referer
http://127.0.0.1:8000/phc/create-patient
accept-encoding
gzip, deflate, br, zstd
accept-language
en-US,en;q=0.9
cookie
laravel-session=eyJpdiI6IjRUR1RYV2VMTGdVQmE2TWNkbnNpRmc9PSIsInZhbHVlIjoiUmVHZXE5Tm5jaW9tRmNpQkFVQnJUckNNYzB2dVBXNVFJdWpLdDhXKzZxMnFXb1hycTM2QTBDdXBETCtDbkZPV0FyVTRlMThOLytlQldaVGVEQU5pc3g2RFR4c0tZT01qbS9icEdOTGQ5SGw1MVN0VVFEaHdUY2p0Vm5YaUhiVDQiLCJtYWMiOiJiMjQ5NTdlNmIyNTYwYjA0ODE4ZTYwZjIwMDRhNmM3ZmVkMGI4NTM5Mjc0YTlmMzU1NTQ1MmZjYjE3NTcyNDk2IiwidGFnIjoiIn0%3D; XSRF-TOKEN=eyJpdiI6Inl5Q0RSbWs2a2t6ZkhUK0xXek15bWc9PSIsInZhbHVlIjoid2FtK0ZwaWdtN1JCRVpBSXlGR00rZEgvbXUvVlQzRzRZRWpaTkkrNGR6NVhsZVZXR053SXlOOW5ad1ZydGhhRTZ2QUp2WVN4dm1YMTFIdU1ZRGRjM21UMXlqWVFsK1JIMUlUSEVFMU9PUFdqWW9WWUZJSFlFeGZ4MHBaTkhWZnMiLCJtYWMiOiIwZDU1NmEzNTdiMzA2NzNhYmZhZWVlMDcxMzVkMDQ0MDE4ZDlmMTBkYjc0MzkxYzc0M2Y5Njc1NTk3YjZmNTgzIiwidGFnIjoiIn0%3D; lafiyar-iyali-session=eyJpdiI6IkdSc0RjZzVrTzZxdm1FbjhubWFoaHc9PSIsInZhbHVlIjoic0Z0cExWQklmUjZicHFlWTFyQUYxNG1aM2hBKzhJcnY4a3hESEo2akFLTWxNb2I2Nys2MWpkQjFNeFZFOFNKSm9Zbm15QlNEejJqNXdmbncrUWQzMTNEZEk3ajArMVdFY1M4OXErQW9xZ3VMMnNUblFkWFh6Mm9pUHdmdyt1L3ciLCJtYWMiOiJjMjExM2M1MzZjZGZhNmI1ZTQxZmU0OGVkNDlmYmY0NTZlNmUyOTNkYmQ4MDY5MTliMjhjMTI3OTIzNzA0ZDk2IiwidGFnIjoiIn0%3D
Body
{
    "woman_name": "Aisha",
    "age": "22",
    "literacy_status": "Literate",
    "phone_number": "09018710083",
    "husband_name": null,
    "husband_phone": null,
    "address": "Ungogo Gabas",
    "community": null,
    "preferred_language": null,
    "lga_id": "8",
    "ward_id": "20",
    "gravida": "7",
    "parity": "6",
    "age_of_pregnancy_weeks": "7",
    "date_of_registration": "2026-02-01",
    "edd": "2026-09-20",
    "fp_interest": "Yes",
    "blood_pressure": "120/80",
    "weight_kg": "70",
    "height_cm": "170",
    "blood_group": "O+",
    "blood_level": null
}
Routing
controller
App\Http\Controllers\PhcStaffController@store
route name
phc.patient.store
middleware
web, auth, verified, role:phc_staff,admin
Routing parameters
// No routing parameters
